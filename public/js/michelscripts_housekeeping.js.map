{"version":3,"sources":["housekeeping_scripts_carta.js","housekeeping_scripts_eventos.js","housekeeping_scripts_ingredientes.js","housekeeping_scripts_pedidos.js","housekeeping_scripts_reservas.js","housekeeping_scripts_vouchers.js","housekeeping_scripts_usuarios.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"michelscripts_housekeeping.js","sourcesContent":["var vueInstance = new Vue({\r\n    el: '#housekeepingproductos',\r\n    created: function(){\r\n        this.getProducts();\r\n    },\r\n    data: {\r\n        searcher: '',\r\n        allIngredients: [],\r\n        products: [],\r\n        showProducts: [],\r\n        ingredients: [],\r\n        fillProduct: {\r\n            'id': '',\r\n            'name': '',\r\n            'type': 1,\r\n            'isExhausted': '',\r\n            'description' : '',\r\n            'photo' : '',\r\n            'price' : 0,\r\n            'price_s' : '',\r\n            'price_m' : '',\r\n            'price_l' : '',\r\n            'price_b' : '',\r\n        },\r\n    },\r\n    methods: {\r\n        getProducts: function() {\r\n            var url = 'products';\r\n            axios.get(url).then(response => {\r\n                this.products = response.data;\r\n                this.showProducts = response.data;\r\n            }).catch(error => {\r\n                toastr.error(\"No se han podido obtener los productos\");\r\n            });\r\n        },\r\n        editProduct: function(product){\r\n            $(\"#theproductid\").text(product.id);\r\n            this.getIngredients(product.id);\r\n            this.getAllIngredients();\r\n            this.fillProduct.id = product.id;\r\n            this.fillProduct.name = product.name;\r\n            this.fillProduct.type = product.type;\r\n            this.changedTypeEdit();\r\n            this.fillProduct.isExhausted = product.isExhausted;\r\n            $(\"#optionExhaust\").val(product.isExhausted);\r\n            this.fillProduct.description = product.description;\r\n            this.fillProduct.photo = product.photo;\r\n            this.fillProduct.price = product.price;\r\n            this.fillProduct.price_s = product.price_s;\r\n            this.fillProduct.price_m = product.price_m;\r\n            this.fillProduct.price_l = product.price_l;\r\n            this.fillProduct.price_b = product.price_b;\r\n\r\n            $('#edit').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n        updateProduct: function(product_id){\r\n            var url = 'products/' + product_id;\r\n            this.fillProduct.isExhausted = $(\"#optionExhaust\").val()\r\n            axios.put(url, this.fillProduct).then(response=> {\r\n                this.getProducts();\r\n                this.resetFillProduct();\r\n                $('#edit').modal('hide');\r\n                toastr.success(\"¡Producto editado con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido editar el producto\");\r\n            });\r\n        },\r\n        deleteProduct: function(product) {\r\n            var url = 'products/' + product.id;\r\n            axios.delete(url).then(response => {\r\n                this.getProducts();\r\n                toastr.success(\"¡Producto eliminado con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido eliminar el producto\");\r\n            });\r\n        },\r\n        createProduct: function() {\r\n            this.getAllIngredients();\r\n            this.ingredients = [];\r\n            this.resetFillProduct();\r\n            $('#create').modal({backdrop: 'static', keyboard: false});\r\n            //this.initializeProduct();\r\n        },\r\n        saveProduct: function(){\r\n            var url = 'products';\r\n            axios.post(url, {\r\n                'name' : this.fillProduct.name,\r\n                'likes' : '0',\r\n                'type' : $(\"#typeOptions\").val(),\r\n                'isExhausted' : 0,\r\n                'description' : this.fillProduct.description,\r\n                'photo' : this.fillProduct.photo,\r\n                'price' : this.fillProduct.price,\r\n                'price_s' : this.fillProduct.price_s,\r\n                'price_m' : this.fillProduct.price_m,\r\n                'price_l' : this.fillProduct.price_l,\r\n                'price_b' : this.fillProduct.price_b,\r\n                'user_id' : 1,\r\n            }).then(response => {\r\n                this.getProducts();\r\n                this.resetFillProduct();\r\n                $('#create').modal('hide');\r\n                toastr.success(\"¡Producto añadido con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido añadir el producto\");\r\n            });\r\n        },\r\n        getAllIngredients: function(){\r\n            var url = 'ingredients';\r\n            axios.get(url).then(response => {\r\n                this.allIngredients = response.data;\r\n            }).catch(error => {\r\n                toastr.error(\"No se han podido obtener los productos\");\r\n            });\r\n        },\r\n        getIngredients: function(product_id){\r\n            var url = 'carta/' + product_id;\r\n            axios.get(url).then(response => {\r\n                this.ingredients = response.data;\r\n            }).catch(error => {\r\n                toastr.error(\"No se han podido obtener los ingredientes del producto\");\r\n            });\r\n        },\r\n        deleteIngredientFromProduct: function(ingredient_id, product_id){\r\n            var url = 'carta/' + ingredient_id + '/' + product_id;\r\n            axios.delete(url).then(response => {\r\n                this.getIngredients(product_id);\r\n                toastr.success(\"¡Ingrediente eliminado!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido eliminar el ingrediente del producto\");\r\n            });\r\n        },\r\n        addIngredientToProductEditing: function(product_id){\r\n            $ingredient_id = (document.getElementById(\"mySelectEdit\").selectedIndex) + 1;\r\n            var url = 'carta/' + $ingredient_name + '/' + product_id;\r\n            axios.post(url).then(response => {\r\n                this.getIngredients(product_id);\r\n                toastr.success(\"¡Ingrediente añadido al producto con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido añadir el ingrediente al producto\");\r\n            });\r\n        },\r\n        closepopup: function(popup){\r\n            popup == 'edit' ? $('#edit').modal('hide') : $('#create').modal('hide');\r\n        },\r\n        changedTypeCreate: function(){\r\n            this.fillProduct.type = $(\"#typeOptions\").val();\r\n            if(this.fillProduct.type != 1){\r\n                $(\"#pizzaPricesCreate\").addClass(\"hide\");\r\n                $(\"#productPriceCreate\").removeClass(\"hide\");\r\n            }else{\r\n                $(\"#pizzaPricesCreate\").removeClass(\"hide\");\r\n                $(\"#productPriceCreate\").addClass(\"hide\");\r\n            }\r\n        },\r\n        changedTypeEdit: function(){\r\n            if(this.fillProduct.type != 1){\r\n                $(\"#pizzaPricesEdit\").addClass(\"hide\");\r\n                $(\"#productPriceEdit\").removeClass(\"hide\");\r\n            }else{\r\n                $(\"#pizzaPricesEdit\").removeClass(\"hide\");\r\n                $(\"#productPriceEdit\").addClass(\"hide\");\r\n            }\r\n        },\r\n        resetFillProduct: function(){\r\n            this.fillProduct = {'id': '','name': '','type': 1,'isExhausted': '','description' : '','photo':'','price':0,'price_s':'','price_m':'','price_l':'','price_b':''};\r\n        },\r\n        parseType: function(type_num){\r\n            var strResult;\r\n            switch(type_num){\r\n                case 1:\r\n                    strResult = \"Pizza\";\r\n                    break;\r\n                case 2:\r\n                    strResult = \"Antipasto\";\r\n                    break;\r\n                case 3:\r\n                    strResult = \"Ensalada\";\r\n                    break;\r\n                case 4:\r\n                    strResult = \"Bebida\";\r\n                    break;\r\n                case 5:\r\n                    strResult = \"Helado\";\r\n                    break;\r\n            }\r\n\r\n            return strResult;\r\n        },\r\n        getContent: function(){\r\n            if(this.searcher.length != 0){\r\n                this.showProducts = [];\r\n                for(i=0; i< this.products.length; i++){\r\n                    if(this.products[i].name.includes(this.capitalize(this.searcher))) {\r\n                        this.showProducts.push(this.products[i]);\r\n                    }\r\n                }\r\n            }else{\r\n                this.showProducts = this.products;\r\n            }\r\n        },\r\n        capitalize: function(str){\r\n            return str.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\r\n        }\r\n    }\r\n});\r\n\r\nvar ingredients = [];\r\nvar pizzaIngredients = [];\r\n\r\nfunction getIngredients(){\r\n    var url = 'getingredientsnames';\r\n    axios.get(url).then(response => {\r\n        var temp = [];\r\n    temp = response.data.ingredients;\r\n    for(i = 0; i < temp.length ; i++){\r\n        ingredients.push(temp[i].name);\r\n    }\r\n}).catch(error => {\r\n        toastr.error(\"Error obteniendo ingredientes\");\r\n});\r\n}\r\n\r\nfunction autocomplete(inp, arr) {\r\n    /*the autocomplete function takes two arguments,\r\n    the text field element and an array of possible autocompleted values:*/\r\n    var currentFocus;\r\n    /*execute a function when someone writes in the text field:*/\r\n    inp.addEventListener(\"input\", function(e) {\r\n        var a, b, i, val = this.value;\r\n        /*close any already open lists of autocompleted values*/\r\n        closeAllLists();\r\n        if (!val) { return false;}\r\n        currentFocus = -1;\r\n        /*create a DIV element that will contain the items (values):*/\r\n        a = document.createElement(\"DIV\");\r\n        a.setAttribute(\"id\", this.id + \"autocomplete-list\");\r\n        a.setAttribute(\"class\", \"autocomplete-items\");\r\n        /*append the DIV element as a child of the autocomplete container:*/\r\n        this.parentNode.appendChild(a);\r\n        /*for each item in the array...*/\r\n        for (i = 0; i < arr.length; i++) {\r\n            /*check if the item starts with the same letters as the text field value:*/\r\n            if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {\r\n                /*create a DIV element for each matching element:*/\r\n                b = document.createElement(\"DIV\");\r\n                /*make the matching letters bold:*/\r\n                b.innerHTML = \"<strong>\" + arr[i].substr(0, val.length) + \"</strong>\";\r\n                b.innerHTML += arr[i].substr(val.length);\r\n                /*insert a input field that will hold the current array item's value:*/\r\n                b.innerHTML += \"<input type='hidden' value='\" + arr[i] + \"'>\";\r\n                /*execute a function when someone clicks on the item value (DIV element):*/\r\n                b.addEventListener(\"click\", function(e) {\r\n                    addIngredient(this.getElementsByTagName(\"input\")[0].value)\r\n                    closeAllLists();\r\n                });\r\n                a.appendChild(b);\r\n            }\r\n        }\r\n    });\r\n    /*execute a function presses a key on the keyboard:*/\r\n    inp.addEventListener(\"keydown\", function(e) {\r\n        var x = document.getElementById(this.id + \"autocomplete-list\");\r\n        if (x) x = x.getElementsByTagName(\"div\");\r\n        if (e.keyCode == 40) {\r\n            /*If the arrow DOWN key is pressed,\r\n            increase the currentFocus variable:*/\r\n            currentFocus++;\r\n            /*and and make the current item more visible:*/\r\n            addActive(x);\r\n        } else if (e.keyCode == 38) { //up\r\n            /*If the arrow UP key is pressed,\r\n            decrease the currentFocus variable:*/\r\n            currentFocus--;\r\n            /*and and make the current item more visible:*/\r\n            addActive(x);\r\n        } else if (e.keyCode == 13) {\r\n            /*If the ENTER key is pressed, prevent the form from being submitted,*/\r\n            e.preventDefault();\r\n            if (currentFocus > -1) {\r\n                /*and simulate a click on the \"active\" item:*/\r\n                if (x) x[currentFocus].click();\r\n            }\r\n        }\r\n    });\r\n    function addActive(x) {\r\n        /*a function to classify an item as \"active\":*/\r\n        if (!x) return false;\r\n        /*start by removing the \"active\" class on all items:*/\r\n        removeActive(x);\r\n        if (currentFocus >= x.length) currentFocus = 0;\r\n        if (currentFocus < 0) currentFocus = (x.length - 1);\r\n        /*add class \"autocomplete-active\":*/\r\n        x[currentFocus].classList.add(\"autocomplete-active\");\r\n    }\r\n    function removeActive(x) {\r\n        /*a function to remove the \"active\" class from all autocomplete items:*/\r\n        for (var i = 0; i < x.length; i++) {\r\n            x[i].classList.remove(\"autocomplete-active\");\r\n        }\r\n    }\r\n    function closeAllLists(elmnt) {\r\n        /*close all autocomplete lists in the document,\r\n        except the one passed as an argument:*/\r\n        var x = document.getElementsByClassName(\"autocomplete-items\");\r\n        for (var i = 0; i < x.length; i++) {\r\n            if (elmnt != x[i] && elmnt != inp) {\r\n                x[i].parentNode.removeChild(x[i]);\r\n            }\r\n        }\r\n    }\r\n    function addIngredient(name) {\r\n        document.getElementById(\"myInputCreatePizza\").value = \"\";\r\n        var product_id = document.getElementById(\"theproductid\").innerHTML;\r\n\r\n        var url = 'carta/' + name + '/' + product_id;\r\n\r\n        axios.post(url).then(response => {\r\n            vueInstance.getIngredients(product_id);\r\n            toastr.success(\"¡Ingrediente añadido al producto con éxito!\");\r\n        }).catch(error => {\r\n            toastr.error(\"No se ha podido añadir el ingrediente al producto\");\r\n        });\r\n    }\r\n    /*execute a function when someone clicks in the document:*/\r\n    document.addEventListener(\"click\", function (e) {\r\n        closeAllLists(e.target);\r\n    });\r\n}\r\nfunction getEventTarget(e) {\r\n    e = e || window.event;\r\n    return e.target || e.srcElement;\r\n}\r\n\r\n$(document).ready(function(){\r\n    document.getElementById(\"myInputCreatePizza\").value = \"\";\r\n    getIngredients();\r\n    autocomplete(document.getElementById(\"myInputCreatePizza\"), ingredients);\r\n\r\n    var ul = document.getElementById('pizzaIngredients');\r\n    ul.onclick = function(event) {\r\n        var target = getEventTarget(event);\r\n        var ingredient = target.innerHTML;\r\n        var ul = document.getElementById(\"pizzaIngredients\");\r\n        var li = document.getElementById(\"ing\" + ingredient);\r\n\r\n        ul.removeChild(li);\r\n    };\r\n});\r\n","new Vue({\r\n    el: '#housekeepingeventos',\r\n    created: function(){\r\n        this.getEvents();\r\n    },\r\n    data: {\r\n        events: [],\r\n        fillEvent: {'id': '','title': '','description': '','photo': '','start_date': '', 'end_date' : ''},\r\n        fillPromotion: {'title': '','body': ''},\r\n    },\r\n    methods: {\r\n        getEvents: function() {\r\n            var url = 'events';\r\n            axios.get(url).then(response => {\r\n                this.events = response.data;\r\n            }).catch(error => {\r\n                toastr.error(\"No se han podido obtener los eventos\");\r\n            });\r\n        },\r\n        editEvent: function(event){\r\n            this.fillEvent.id = event.id;\r\n            this.fillEvent.title = event.title;\r\n            this.fillEvent.description = event.description;\r\n            this.fillEvent.photo = event.photo;\r\n            this.fillEvent.start_date = event.start_date;\r\n            this.fillEvent.end_date = event.end_date;\r\n\r\n            $('#edit').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n        updateEvent: function(event_id){\r\n            var url = 'events/' + event_id;\r\n            axios.put(url, this.fillEvent).then(response=> {\r\n                this.getEvents();\r\n                this.fillEvent = {'id': '','title': '','description': '','photo': '','start_date': '', 'end_date' : ''};\r\n                $('#edit').modal('hide');\r\n                toastr.success(\"¡Evento editado con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido editar el evento\");\r\n            });\r\n        },\r\n        deleteEvent: function(event) {\r\n            var url = 'events/' + event.id;\r\n            axios.delete(url).then(response => {\r\n                this.getEvents();\r\n                toastr.success(\"¡Evento eliminado con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido eliminar el evento\");\r\n            });\r\n        },\r\n        createEvent: function() {\r\n            this.fillEvent = {'id': '','title': '','description': '','photo': '','start_date': '', 'end_date' : ''};\r\n            $('#create').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n        saveEvent: function(){\r\n            var url = 'generateevent';\r\n            axios.post(url, {\r\n                'title' : this.fillEvent.title,\r\n                'description' : this.fillEvent.description,\r\n                'photo' : this.fillEvent.photo,\r\n                'start_date' : $(\"#datepickerStart\").val(),\r\n                'start_hour' : $(\"#horaInicio\").val(),\r\n                'end_date' : $(\"#datepickerEnd\").val(),\r\n                'end_hour' : $(\"#horaFin\").val(),\r\n            }).then(response => {\r\n                this.getEvents();\r\n                this.fillEvent = {'id': '','title': '','description': '','photo': '','start_date': '', 'end_date' : ''};\r\n                $('#create').modal('hide');\r\n                toastr.success(\"¡Evento añadido con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido añadir el evento\");\r\n            });\r\n        },\r\n        closepopup: function(popup){\r\n            popup == 'edit' ? $('#edit').modal('hide') : $('#create').modal('hide');\r\n        },\r\n        closepopupPromotion: function(popup){\r\n            $('#createPromotion').modal('hide');\r\n        },\r\n        customFormatDate: function(eventDate){\r\n            parts = eventDate.split(\" \");\r\n            date = parts[0].split(\"-\");\r\n            hour = parts[1].split(\":\");\r\n\r\n            return date[2] + \"/\" + date[1] + \"/\" + date[0] + \" a las \" + hour[0] + \":\" + hour[1]\r\n        },\r\n        createPromotion: function(){\r\n            $('#createPromotion').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n        sendPromotion: function(){\r\n            if(this.checkNewPromotionInputs()){\r\n                this.closepopupPromotion();\r\n                var url = 'generatepromotion';\r\n                axios.post(url, {\r\n                    'title' : this.fillPromotion.title,\r\n                    'date' : $(\"#datepicker\").val(),\r\n                    'body' : this.fillPromotion.body,\r\n                }).then(response => {\r\n                    this.fillPromotion = {'title': '','body': ''};\r\n                    $(\"#datepicker\").val(\"\")\r\n                    toastr.success(\"¡Promoción lanzada!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido lanzar la promoción\");\r\n            });\r\n            }else{\r\n                toastr.error(\"Llena todos los campos\");\r\n            }\r\n        },\r\n        checkNewPromotionInputs: function(){\r\n            if(this.fillPromotion.title.length == 0 || $(\"#datepicker\").val().length == 0 || this.fillPromotion.body.length == 0 ){\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n});","new Vue({\r\n    el: '#housekeepingingredients',\r\n    created: function(){\r\n        this.getIngredients();\r\n    },\r\n    data: {\r\n        searcher: '',\r\n        ingredients: [],\r\n        showIngredients: [],\r\n        fillIngredient: {'id':'','name': '', 'price': ''},\r\n    },\r\n    methods: {\r\n        getIngredients: function() {\r\n            var url = 'ingredients';\r\n            axios.get(url).then(response => {\r\n                this.ingredients = response.data;\r\n                this.showIngredients = response.data;\r\n            }).catch(error => {\r\n                toastr.error(\"No se han podido obtener los ingredientes\");\r\n            });\r\n        },\r\n        editIngredient: function(ingredient){\r\n            this.fillIngredient.id = ingredient.id;\r\n            this.fillIngredient.name = ingredient.name;\r\n            this.fillIngredient.price = ingredient.price;\r\n\r\n            $('#edit').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n        updateIngredient: function(ingredient_id){\r\n            var url = 'ingredients/' + ingredient_id;\r\n            axios.put(url, this.fillIngredient).then(response=> {\r\n                this.getIngredients();\r\n                this.fillIngredient = {'id':'','name': '', 'price':''};\r\n                $('#edit').modal('hide');\r\n                toastr.success(\"¡Ingrediente editado con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido editar el ingrediente\");\r\n            });\r\n        },\r\n        deleteIngredient: function(ingredient) {\r\n            var url = 'ingredients/' + ingredient.id;\r\n            axios.delete(url).then(response => {\r\n                this.getIngredients();\r\n                toastr.success(\"¡Ingrediente eliminado con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido eliminar el ingrediente\");\r\n            });\r\n        },\r\n        createIngredient: function() {\r\n            this.fillIngredient = {'id':'','name': '', 'price':''};\r\n            $('#create').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n        saveIngredient: function(){\r\n            var url = 'ingredients';\r\n            axios.post(url, {\r\n                'name' : this.fillIngredient.name,\r\n                'price' : this.fillIngredient.price,\r\n            }).then(response => {\r\n                this.getIngredients();\r\n                this.fillIngredient = {'id':'','name': '', 'price':''};\r\n                $('#create').modal('hide');\r\n                toastr.success(\"¡Ingrediente añadido con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido añadir el ingrediente\");\r\n            });\r\n        },\r\n        closepopup: function(popup){\r\n            popup == 'edit' ? $('#edit').modal('hide') : $('#create').modal('hide');\r\n        },\r\n        getContent: function(){\r\n            if(this.searcher.length != 0){\r\n                this.showIngredients = [];\r\n                for(i=0; i< this.ingredients.length; i++){\r\n                    //alert(this.ingredients[i].name + \" includes \" + this.searcher);\r\n                    if(this.ingredients[i].name.includes(this.searcher)) {\r\n                        this.showIngredients.push(this.ingredients[i]);\r\n                    }\r\n                }\r\n            }else{\r\n                this.showIngredients = this.ingredients;\r\n            }\r\n        },\r\n        capitalize: function(str){\r\n            return str.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\r\n        }\r\n    }\r\n});","new Vue({\r\n    el: '#housekeepingpedidos',\r\n    created: function(){\r\n        this.getOrders();\r\n    },\r\n    data: {\r\n        orders: [],\r\n        fillOrder: {'id': '','user_id': '','orderDate': '','state': '','direction': '', 'is_payed': ''},\r\n        orderProducts: [],\r\n        orderProductsInfo: [],\r\n        finalOrderProducts: []\r\n    },\r\n    methods: {\r\n        getOrders: function() {\r\n            var url = 'orders';\r\n            axios.get(url).then(response => {\r\n                this.orders = response.data;\r\n            }).catch(error => {\r\n                toastr.error(\"No se han podido obtener los pedidos\");\r\n            });\r\n        },\r\n        viewOrder: function(order){\r\n            this.fillOrder.id = order.id;\r\n            this.fillOrder.user_id = order.user_id;\r\n            this.fillOrder.orderDate = order.orderDate;\r\n            this.fillOrder.state = order.state;\r\n            this.fillOrder.direction = order.direction;\r\n\r\n            $(\"#selectOrderState\").val(this.fillOrder.state);\r\n\r\n            this.getOrderContent(order);\r\n\r\n        },\r\n        editOrder: function(order){\r\n            this.fillOrder.id = order.id;\r\n            this.fillOrder.user_id = order.user_id;\r\n            this.fillOrder.orderDate = order.orderDate;\r\n            this.fillOrder.state = order.state;\r\n            this.fillOrder.direction = order.direction;\r\n\r\n            $(\"#selectOrderState\").val(this.fillOrder.state);\r\n\r\n            $('#edit').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n        updateOrder: function(order_id){\r\n            var url = 'orders/' + order_id;\r\n            this.fillOrder.state = $(\"#selectOrderState\").val();\r\n            axios.put(url, this.fillOrder).then(response=> {\r\n                this.getOrders();\r\n                orderResponse(this.fillOrder.user_id,order_id,this.fillOrder.state);\r\n                this.fillOrder = {'id': '','user_id': '','orderDate': '','state': '','direction': ''};\r\n                $('#edit').modal('hide');\r\n                toastr.success(\"¡Pedido editado con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido editar el pedido\");\r\n            });\r\n        },\r\n        deleteOrder: function(order) {\r\n            var url = 'orders/' + order.id;\r\n            axios.delete(url).then(response => {\r\n                this.getOrders();\r\n                toastr.success(\"¡Pedido eliminado con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido eliminar el pedido\");\r\n            });\r\n        },\r\n        createOrder: function() {\r\n            var d = new Date();\r\n            var curr_date = d.getFullYear() + \"-\" + (((d.getMonth()+1) < 10 ? '0':'') + (d.getMonth()+1)) + \"-\" + ((d.getDate() < 10 ? '0':'') + d.getDate()) + \" \" + d.getHours() + \":\" + ((d.getMinutes() < 10 ? '0':'') + d.getMinutes()) + \":\" + ((d.getSeconds() < 10 ? '0':'') + d.getSeconds());\r\n            this.fillOrder = {'id': '','user_id': '','orderDate': curr_date,'state': '','direction': ''};\r\n            $('#create').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n        saveOrder: function(){\r\n            var url = 'orders';\r\n            axios.post(url, {\r\n                'user_id' : this.fillOrder.user_id,\r\n                'orderDate' : this.fillOrder.orderDate,\r\n                'state' : this.fillOrder.state,\r\n                'direction' : this.fillOrder.direction,\r\n            }).then(response => {\r\n                this.getOrders();\r\n                this.fillOrder = {'id': '','user_id': '','orderDate': '','state': '','direction': ''};\r\n                $('#create').modal('hide');\r\n                toastr.success(\"¡Pedido añadido con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido añadir el pedido\");\r\n            });\r\n\r\n        },\r\n        closepopup: function(popup){\r\n            popup == 'edit' ? $('#edit').modal('hide') : $('#create').modal('hide');\r\n            $('#view').modal('hide');\r\n        },\r\n        getOrderContent: function(order){\r\n            this.finalOrderProducts = []\r\n            var url = 'getOrderProductsById';\r\n            axios.post(url, {\r\n                'order_id' : order.id,\r\n            }).then(response => {\r\n                this.orderProducts = response.data.products\r\n                this.orderProductsInfo = response.data.orderproducts\r\n\r\n                for(i = 0; i < response.data.products[0]['products'].length; i++){\r\n                    product = {}\r\n                    product['quantity'] = response.data.orderproducts[0]['orderproducts'][i]['quantity']\r\n                    product['size'] = response.data.orderproducts[0]['orderproducts'][i]['size']\r\n                    product['product'] = response.data.products[0]['products'][i];\r\n\r\n                    this.finalOrderProducts.push(product)\r\n                }\r\n\r\n            $('#view').modal({backdrop: 'static', keyboard: false});\r\n\r\n            }).catch(error => {\r\n                toastr.error(\"Error obteniendo los productos del pedido\");\r\n            });\r\n        },\r\n        changeIngredientsState: function(id){\r\n            if($(\"#productIngredients\" + id).hasClass(\"hide\")){\r\n                $(\"#productIngredients\" + id).removeClass(\"hide\")\r\n                $(\"#icon\" + id).removeClass(\"fa-chevron-down\").addClass(\"fa-chevron-up\")\r\n            }else{\r\n                $(\"#productIngredients\" + id).addClass(\"hide\")\r\n                $(\"#icon\" + id).removeClass(\"fa-chevron-up\").addClass(\"fa-chevron-down\")\r\n            }\r\n        },\r\n        updateOrderState: function(order){\r\n            var url = 'updateOrderState/' + order.id;\r\n            var state = $(\"#orderState\" + order.id).val()\r\n            axios.put(url, {\r\n                'state' : state\r\n            }).then(response=> {\r\n                this.getOrders();\r\n                orderResponse(order.user_id,order.id,state);\r\n                toastr.success(\"¡Estado actualizado!\");\r\n            }).catch(error => {\r\n                    toastr.error(\"No se ha podido actualizar el estado\");\r\n            });\r\n        },\r\n        customFormatDate: function(orderDate){\r\n            parts = orderDate.split(\" \");\r\n            date = parts[0].split(\"-\");\r\n            hour = parts[1].split(\":\");\r\n\r\n            return date[2] + \"/\" + date[1] + \"/\" + date[0] + \" a las \" + hour[0] + \":\" + hour[1]\r\n        },\r\n        transferPoints: function(order){\r\n            var url = 'transferPoints'\r\n            axios.post(url, {\r\n                'user_id' : order.user_id,\r\n                'order_id' : order.id,\r\n                'points' : order.reward_points,\r\n            }).then(response=> {\r\n                this.getOrders();\r\n                toastr.success(\"¡Pedido pagado y puntos entregados!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se han podido entregar los puntos al usuario\");\r\n            });\r\n        }\r\n    }\r\n});","new Vue({\r\n    el: '#housekeepingreservas',\r\n    created: function(){\r\n        this.getBooks();\r\n    },\r\n    data: {\r\n        books: [],\r\n        fillBook: {'id': '','user_id': '','numPeople': '','bookDate': '','state': ''},\r\n        hour: \"00\",\r\n        minutes: \"00\",\r\n    },\r\n    methods: {\r\n        getBooks: function() {\r\n            var url = 'books';\r\n            axios.get(url).then(response => {\r\n                this.books = response.data;\r\n            }).catch(error => {\r\n                toastr.error(\"No se han podido obtener las reservas\");\r\n            });\r\n        },\r\n        editBook: function(book){\r\n            this.fillBook.id = book.id;\r\n            this.fillBook.user_id = book.user_id;\r\n            this.fillBook.numPeople = book.numPeople;\r\n            this.fillBook.bookDate = book.bookDate;\r\n            this.fillBook.state = book.state;\r\n            $(\"#selectBookState\").val(this.fillBook.state);\r\n\r\n            $('#edit').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n        updateBook: function(book_id){\r\n            var url = 'books/' + book_id;\r\n            this.fillBook.state = $(\"#selectBookState\").val();\r\n            axios.put(url, this.fillBook).then(response=> {\r\n                this.getBooks();\r\n                 bookResponse(this.fillBook.user_id, this.fillBook.bookDate, this.fillBook.state);\r\n                $('#edit').modal('hide');\r\n                toastr.success(\"¡Reserva editada con éxito!\");\r\n                this.fillBook =  {'id': '','user_id': '','numPeople': '','bookDate': '','state': ''}\r\n        }).catch(error => {\r\n                toastr.error(\"No se ha podido editar la reserva\");\r\n            });\r\n        },\r\n        deleteBook: function(book) {\r\n            var url = 'books/' + book.id;\r\n            axios.delete(url).then(response => {\r\n                this.getBooks();\r\n                toastr.success(\"¡Reserva eliminada con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido eliminar la reserva\");\r\n            });\r\n        },\r\n        createBook: function() {\r\n            this.fillBook =  {'id': '','user_id': '','numPeople': '','bookDate': '','state': ''};\r\n            $('#createBook').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n        saveBook: function(){\r\n            var url = 'books';\r\n            axios.post(url, {\r\n                'user_id' : this.fillBook.user_id,\r\n                'numPeople' : this.fillBook.numPeople,\r\n                'bookDate' : this.fillBook.bookDate,\r\n                'state' : 'Aceptada',\r\n            }).then(response => {\r\n                this.getBooks();\r\n                this.fillBook = {'id': '','user_id': '','numPeople': '','bookDate': '','state': ''};\r\n                $('#createBook').modal('hide');\r\n                toastr.success(\"¡Reserva añadida con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido añadir la reserva\");\r\n            });\r\n        },\r\n        closepopup: function(popup){\r\n            popup == 'edit' ? $('#edit').modal('hide') : $('#createBook').modal('hide');\r\n        },\r\n        closeModalBook: function(){\r\n            $('#createBook').modal('hide');\r\n        },\r\n        updateBookState: function(book){\r\n            var url = 'updateBookState/' + book.id;\r\n            var state = $(\"#bookState\" + book.id).val()\r\n            axios.put(url, {\r\n                'state' : state\r\n            }).then(response=> {\r\n                this.getBooks();\r\n                bookResponse(book.user_id, book.bookDate, state);\r\n                toastr.success(\"¡Estado actualizado!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido actualizar el estado\");\r\n            });\r\n        },\r\n        customFormatDate: function(bookDate){\r\n            parts = bookDate.split(\" \");\r\n            date = parts[0].split(\"-\");\r\n            hour = parts[1].split(\":\");\r\n\r\n            return date[2] + \"/\" + date[1] + \"/\" + date[0] + \" a las \" + hour[0] + \":\" + hour[1]\r\n        },\r\n        generateBook: function(){\r\n            var hours = $(\"#hourpicker\").val();\r\n            var minutes = $(\"#minutespicker\").val();\r\n            var finalHour = this.hour + \":\" + this.minutes;\r\n            var nump = $(\"#numPersons\").val();\r\n            var date = $(\"#datepicker\").val();\r\n\r\n            if(this.checkBookInputs(date,nump)){\r\n                var url = 'generatebook';\r\n                axios.post(url, {\r\n                    'date' : date,\r\n                    'hour' : finalHour,\r\n                    'numPersons' : nump,\r\n                    'admin' : true\r\n                }).then(response => {\r\n                    if(response.data.result){\r\n                    $(\"#hourpicker\").val(\"\");\r\n                    $(\"#numPersons\").val(\"\");\r\n                    $(\"#datepicker\").val(\"\");\r\n                    $('#createBook').modal('hide');\r\n                    this.getBooks();\r\n                    toastr.success(\"Reserva realizada con éxito\");\r\n                }else{\r\n                    toastr.error(\"Introduce una fecha posterior a la actual\");\r\n                }\r\n            }).catch(error => {\r\n                    toastr.error(\"Error al realizar la reserva. Intentalo de nuevo más tarde\");\r\n            });\r\n            }else{\r\n                toastr.error(\"Revisa los datos introducidos\");\r\n            }\r\n        },\r\n        checkBookInputs: function(date,nump){\r\n            if(date.length==0 || nump.length==0){\r\n                return false;\r\n            }else{\r\n                return true;\r\n            }\r\n        },showHour: function(){\r\n            var hour = $(\"#hourpicker\").val();\r\n            if(hour < 10 && hour.length != 0){\r\n                this.hour = \"0\" + hour\r\n            }else if(hour > 23){\r\n                this.hour = \"00\"\r\n            }else if(hour.length == 0){\r\n                this.hour = \"00\"\r\n            }else{\r\n                this.hour = hour\r\n            }\r\n        },\r\n        showMinute: function(){\r\n            var minutes = $(\"#minutespicker\").val();\r\n            if(minutes < 10 && minutes.length != 0){\r\n                this.minutes = \"0\" + minutes\r\n            }else if(minutes > 59){\r\n                this.minutes = \"00\"\r\n            }else if(minutes.length == 0){\r\n                this.minutes = \"00\"\r\n            }else{\r\n                this.minutes = minutes\r\n            }\r\n        }\r\n    }\r\n});","new Vue({\r\n    el: '#housekeepingvouchers',\r\n    created: function(){\r\n        this.getVouchers();\r\n    },\r\n    data: {\r\n        allVouchers: [],\r\n        voucherCode: ''\r\n    },\r\n    methods: {\r\n        getVouchers: function(){\r\n            var url = 'getVouchers'\r\n            axios.get(url).then(response => {\r\n                this.allVouchers = response.data;\r\n            }).catch(error => {\r\n                toastr.error(\"No se han podido obtener los códigos\");\r\n            });\r\n        },\r\n        validateVoucher: function(){\r\n            if(this.voucherCode.length == 6){\r\n                $(\"#voucher_success\").addClass(\"hide\");\r\n                $(\"#voucher_error\").addClass(\"hide\");\r\n                var url = 'validateVoucher';\r\n                axios.post(url, {\r\n                    'code' : this.voucherCode,\r\n                }).then(response => {\r\n                    this.showResults(response);\r\n                }).catch(error => {\r\n                    toastr.error(\"No se ha encontrado el código en el sistema\");\r\n                });\r\n            }else{\r\n                toastr.error(\"Introduce un código de 6 dígitos\");\r\n            }\r\n\r\n        },\r\n        showResults: function(response){\r\n            var result = response.data.result;\r\n            if(result){\r\n                $(\"#voucher_success\").removeClass(\"hide\");\r\n            }else{\r\n                $(\"#voucher_error\").removeClass(\"hide\");\r\n            }\r\n        },\r\n        checkVoucher: function(){\r\n            var found = false;\r\n            for(i = 0; i < this.allVouchers.length; i++){\r\n                if(this.allVouchers[i].code == this.voucherCode){\r\n                    found = true;\r\n                    $(\"#voucherInfo-username\").text(this.allVouchers[i].user.name + \" \" + this.allVouchers[i].user.surnames)\r\n                    $(\"#voucherInfo-usermail\").text(this.allVouchers[i].user.email)\r\n                    $(\"#voucherInfo-userphone\").text(this.allVouchers[i].user.phone)\r\n                    $(\"#voucherInfo-userphoto\").attr(\"src\",this.allVouchers[i].user.photo)\r\n                    $(\"#voucherInfo-userpoints\").text(this.allVouchers[i].user.points)\r\n                    $(\"#voucherInfo-voucherpoints\").text(this.allVouchers[i].points)\r\n\r\n                }\r\n            }\r\n\r\n            if(found){\r\n                $(\"#voucher_info\").removeClass(\"hide\");\r\n                $(\"#generateVoucher\").removeClass(\"hide\");\r\n                $(\"#voucherNotFound\").addClass(\"hide\");\r\n            }else{\r\n                $(\"#voucherNotFound\").removeClass(\"hide\");\r\n                $(\"#voucher_info\").addClass(\"hide\");\r\n                $(\"#generateVoucher\").addClass(\"hide\");\r\n                $(\"#voucher_success\").addClass(\"hide\");\r\n                $(\"#voucher_error\").addClass(\"hide\");\r\n            }\r\n        }\r\n    }\r\n});","new Vue({\r\n    el: '#housekeepingusers',\r\n    created: function(){\r\n        this.getUsers();\r\n    },\r\n    data: {\r\n        searcher: '',\r\n        users: [],\r\n        showUsers: [],\r\n        fillUser: {'id': '','name': '','email':'','surnames': '','direction': '','photo': '','isAdmin':'', 'points':'', 'phone':''},\r\n    },\r\n    methods: {\r\n        getUsers: function() {\r\n            var url = 'users';\r\n            axios.get(url).then(response => {\r\n                this.users = response.data;\r\n                this.showUsers = response.data;\r\n            }).catch(error => {\r\n                toastr.error(\"No se han podido obtener los usuarios\");\r\n            });\r\n        },\r\n        editUser: function(user){\r\n            this.fillUser.id = user.id;\r\n            this.fillUser.name = user.name;\r\n            this.fillUser.email = user.email;\r\n            this.fillUser.surnames = user.surnames;\r\n            this.fillUser.direction = user.direction;\r\n            this.fillUser.photo = user.photo;\r\n            this.fillUser.isAdmin = user.isAdmin;\r\n            this.fillUser.points = user.points;\r\n            this.fillUser.phone = user.phone;\r\n\r\n            $('#edit').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n        updateUser: function(user_id){\r\n            var url = 'users/' + user_id;\r\n\r\n            axios.put(url, this.fillUser).then(response=> {\r\n                this.getUsers();\r\n                this.fillUser = {'id': '','name': '','email':'','surnames': '','direction': '','photo': '','isAdmin':'', 'points':'','phone':''};\r\n                $('#edit').modal('hide');\r\n                toastr.success(\"¡Usuario editado con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido editar el usuario\");\r\n            });\r\n        },\r\n        deleteUser: function(user) {\r\n            var url = 'users/' + user.id;\r\n            axios.delete(url).then(response => {\r\n                this.getUsers();\r\n                toastr.success(\"¡Usuario eliminado con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido eliminar el usuario\");\r\n            });\r\n        },\r\n        createUser: function() {\r\n            this.fillUser = {'id': '','name': '','email':'','surnames': '','direction': '','photo': '','isAdmin':'', 'points':''};\r\n            $('#create').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n        saveUser: function(){\r\n            var url = 'users';\r\n            axios.post(url, {\r\n                'name' : this.fillUser.name,\r\n                'email' : this.fillUser.email,\r\n                'surnames' : this.fillUser.surnames,\r\n                'direction' : this.fillUser.direction,\r\n                'photo' : this.fillUser.photo,\r\n                'isAdmin' : 0,\r\n                'points' : this.fillUser.points,\r\n            }).then(response => {\r\n                this.getUsers();\r\n                this.fillUser = {'id': '','name': '','email':'','surnames': '','direction': '','photo': '','isAdmin':'', 'points':''};\r\n                $('#create').modal('hide');\r\n                toastr.success(\"¡Usuario añadido con éxito!\");\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido añadir el usuario\");\r\n            });\r\n        },\r\n        closepopup: function(popup){\r\n            popup == 'edit' ? $('#edit').modal('hide') : $('#create').modal('hide');\r\n        },\r\n        getContent: function(){\r\n            if(this.searcher.length != 0){\r\n                this.showUsers = [];\r\n                for(i=0; i< this.users.length; i++){\r\n                    if(this.users[i].name.includes(this.capitalize(this.searcher))) {\r\n                        this.showUsers.push(this.users[i]);\r\n                    }\r\n                }\r\n            }else{\r\n                this.showUsers = this.users;\r\n            }\r\n        },\r\n        capitalize: function(str){\r\n            return str.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\r\n        }\r\n    }\r\n});"],"sourceRoot":"/source/"}