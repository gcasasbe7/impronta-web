{"version":3,"sources":["mainOrder.js","vue-user.js","commentsbuilder.js","commentsbuilder-neworder.js","loginregistertransition.js","menutransition.js","seekbar.js","usermenu.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"michelscripts_essentials.js","sourcesContent":["var mainOrder = new Vue({\r\n    el: '#mainOrder',\r\n    mounted: function(){\r\n        this.getOrderDataFromCache();\r\n    },\r\n    data: {\r\n        actualProduct: '',\r\n        myOrder: [],\r\n        productOrderId: 0,\r\n    },\r\n    methods: {\r\n        getOrderDataFromCache: function(){\r\n            this.refreshNotificationsBadge();\r\n            this.productOrderId = localStorage['productOrderId'] ? localStorage['productOrderId'] : 0;\r\n        },\r\n        refreshNotificationsBadge: function(){\r\n            this.myOrder = localStorage['myOrder'] ? JSON.parse(localStorage['myOrder']) : [];\r\n            if(this.myOrder.length == 0){\r\n                $(document).ready(function(){\r\n                    $(\"#orderNotifications\").addClass(\"hide\");\r\n                });\r\n            }else{\r\n                var notif = 0;\r\n                for(i = 0; i < this.myOrder.length; i++){\r\n                    notif += parseInt(this.myOrder[i].quantity);\r\n                }\r\n                $(document).ready(function(){\r\n                    $(\"#orderNotifications\").removeClass(\"hide\").html(notif);\r\n                });\r\n            }\r\n        },\r\n        showPopUpAddPizza: function (product) {\r\n            this.actualProduct = product;\r\n            $('#popupAddPizzaToOrder').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n        closePopupAddPizza: function () {\r\n            $('#popupAddPizzaToOrder').modal('hide');\r\n        },\r\n        addProductToOrder: function () {\r\n            var quantity = document.getElementById(\"inpQuantity\").value;\r\n            if(quantity < 1){\r\n                toastr.error(\"Introduce una cantidad valida\");\r\n            }else{\r\n                var price = this.actualProduct.price;\r\n                var obj = {};\r\n                obj['id'] = this.productOrderId;\r\n                this.productOrderId++;\r\n                localStorage['productOrderId'] = this.productOrderId;\r\n                obj['quantity'] = quantity;\r\n\r\n                if(this.actualProduct.type == 1){\r\n                    var size = document.getElementById(\"pizzaToAddSize\").value;\r\n                    switch (size) {\r\n                        case \"pequeña\":\r\n                            price = this.actualProduct.price_s;\r\n                            break;\r\n                        case \"mediana\":\r\n                            price = this.actualProduct.price_m;\r\n                            break;\r\n                        case \"grande\":\r\n                            price = this.actualProduct.price_l;\r\n                            break;\r\n                        case \"brusquetta\":\r\n                            price = this.actualProduct.price_b;\r\n                            break;\r\n                    }\r\n                    obj['size'] = size;\r\n                }\r\n\r\n                var finalPrice = quantity * price;\r\n                obj['finalPrice'] = finalPrice;\r\n\r\n\r\n                obj['product'] = this.actualProduct;\r\n\r\n                this.myOrder.push(obj);\r\n\r\n                document.getElementById(\"inpQuantity\").value = \"\";\r\n                this.closePopupAddPizza();\r\n\r\n                localStorage['myOrder'] = JSON.stringify(this.myOrder);\r\n\r\n                this.refreshNotificationsBadge();\r\n\r\n                toastr.info('Producto añadido al pedido', 'Información', {\r\n                    positionClass: \"toast-top-left\"\r\n                });\r\n\r\n                sendOrderVue.initializeValues();\r\n            }\r\n        },\r\n        deleteProductFromOrder: function(obj){\r\n            var removeIndex = this.myOrder.map(function(item) { return item.id; }).indexOf(obj.id);\r\n            this.myOrder.splice(removeIndex, 1);\r\n            localStorage['myOrder'] = JSON.stringify(this.myOrder);\r\n\r\n            this.refreshNotificationsBadge();\r\n\r\n            toastr.info('Producto eliminado del pedido', 'Información', {\r\n                positionClass: \"toast-top-left\"\r\n            });\r\n        },\r\n    }\r\n});\r\n\r\n","var vue_user = new Vue({\r\n    el: '#vue-user',\r\n    created: function(){\r\n        this.initializeMyPizzas();\r\n        this.initializeIngredients();\r\n        this.initializeMyFavs();\r\n        this.initializeMyBooks();\r\n        this.initializeMyOrders();\r\n        this.initializeMyDontLikeIngredients();\r\n        this.initializeMyVouchers();\r\n        this.getUserDirection();\r\n    },\r\n    data: {\r\n        myPizzas: [],\r\n        myFavs: [],\r\n        myBooks: [],\r\n        myOrders: [],\r\n        myDontLikeIngredients: [],\r\n        myVouchers: [],\r\n        fillProduct: {\r\n            'id': '',\r\n            'name': '',\r\n            'likes': '',\r\n            'averageRate': '',\r\n            'type': '',\r\n            'price': '',\r\n            'isExhausted': '',\r\n            'isOffered': '',\r\n            'description' : '',\r\n            'photo' : '',\r\n            'user_id': ''\r\n        },\r\n        allIngredients: [],\r\n        pizzaIngredients: [],\r\n        user_points: 0,\r\n        hour: \"00\",\r\n        minutes: \"00\",\r\n        orderToRepeat: {},\r\n        userDirection: '',\r\n        little_price: 0,\r\n        medium_price: 0,\r\n        big_price: 0,\r\n        brusquetta_price: 0,\r\n        imInDontLike: 0,\r\n    },\r\n    methods: {\r\n        initializeMyPizzas: function() {\r\n            var url = 'getuserpizzas';\r\n            axios.get(url).then(response => {\r\n                this.myPizzas = response.data.userpizzas;\r\n            }).catch(error => {\r\n                toastr.error(\"Error obteniendo mis pizzas\");\r\n            });\r\n        },\r\n        getUserDirection: function(){\r\n            var url = \"getuserdirection\";\r\n            axios.get(url).then(response => {\r\n                this.userDirection = response.data.direction;\r\n        }).catch(error => {\r\n                toastr.error(\"Error obteniendo dirección de usuario\");\r\n        });\r\n        },\r\n        initializeIngredients: function() {\r\n            var url = 'getingredientsnames';\r\n            axios.get(url).then(response => {\r\n                this.allIngredients = response.data.ingredients;\r\n            }).catch(error => {\r\n                    toastr.error(\"Error obteniendo mis pizzas\");\r\n            });\r\n        },\r\n        initializeMyDontLikeIngredients: function() {\r\n            var url = 'getdontlikeingredients';\r\n            axios.get(url).then(response => {\r\n                this.myDontLikeIngredients = response.data.ingredients;\r\n            }).catch(error => {\r\n                    toastr.error(\"Error obteniendo ingredientes marcados\");\r\n            });\r\n        },\r\n        initializeMyFavs: function() {\r\n            var url = 'getfavs';\r\n            axios.get(url).then(response => {\r\n                this.myFavs = response.data.favs;\r\n                this.user_points = response.data.points;\r\n            }).catch(error => {\r\n                toastr.error(\"Error obteniendo mis productos favoritos\");\r\n            });\r\n        },initializeMyBooks: function() {\r\n            var url = 'getbooks';\r\n            axios.get(url).then(response => {\r\n                this.myBooks = response.data.books;\r\n        }).catch(error => {\r\n                toastr.error(\"Error obteniendo mis reservas\");\r\n            });\r\n        },initializeMyOrders: function() {\r\n            var url = 'getorders';\r\n            axios.get(url).then(response => {\r\n                this.myOrders = response.data.orders;\r\n            }).catch(error => {\r\n                toastr.error(\"Error obteniendo mis pedidos\" + error);\r\n            });\r\n        },\r\n        initializeMyVouchers: function() {\r\n            var url = 'getvouchers';\r\n            axios.get(url).then(response => {\r\n                this.myVouchers = response.data.vouchers;\r\n            }).catch(error => {\r\n                toastr.error(\"Error obteniendo mis cupones\" + error);\r\n            });\r\n        },\r\n        showModalPizza: function(){\r\n            this.fillProduct.name = '';\r\n            this.fillProduct.description = '';\r\n            $(\"#pizzaIngredients\").empty();\r\n            document.getElementById(\"little_price\").innerHTML = \"0.00\";\r\n            document.getElementById(\"medium_price\").innerHTML = \"0.00\";\r\n            document.getElementById(\"big_price\").innerHTML = \"0.00\";\r\n            document.getElementById(\"brusquetta_price\").innerHTML = \"0.00\";\r\n            $('#createPizza').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n        closeModalPizza: function(){\r\n            $('#createPizza').modal('hide');\r\n        },\r\n        closeModalConfirmReorder: function(){\r\n            $('#confirmReorder').modal('hide');\r\n            $(\"#directionInfo\").addClass(\"hide\");\r\n            $(\"#sameDirection\").removeClass(\"hide\");\r\n        },\r\n        showModalBook: function(){\r\n            this.fillProduct.name = '';\r\n            this.fillProduct.description = '';\r\n            $('#createBook').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n        closeModalBook: function(){\r\n            $('#createBook').modal('hide');\r\n        },\r\n        createMyPizza: function(){\r\n            if(this.fillProduct.name == \"\" || this.fillProduct.description == \"\"){\r\n                toastr.error(\"Introduce todos los datos necesarios\");\r\n            }else{\r\n                var lis = document.getElementById(\"pizzaIngredients\").getElementsByTagName(\"li\");\r\n                for(i = 0; i < lis.length ; i++){\r\n                    this.pizzaIngredients.push(lis[i].innerHTML);\r\n                }\r\n\r\n                var url = 'createmypizza';\r\n                axios.post(url, {\r\n                    'name' : this.fillProduct.name,\r\n                    'description' : this.fillProduct.description,\r\n                    'ingredients' : this.pizzaIngredients,\r\n                    'isPublic' : $(\"#isPublic\").prop(\"checked\"),\r\n                    'price_s' : this.little_price,\r\n                    'price_m' : this.medium_price,\r\n                    'price_l' : this.big_price,\r\n                    'price_b' : this.brusquetta_price,\r\n                }).then(response => {\r\n                    this.initializeMyPizzas();\r\n                    this.fillProduct = {'name': '','description' : ''};\r\n                    $('#createPizza').modal('hide');\r\n                }).catch(error => {\r\n                    toastr.error(\"Error al crear la pizza\");\r\n                });\r\n            }\r\n        },\r\n        deleteMyPizza: function(id){\r\n            var url = 'products/' + id;\r\n            axios.delete(url).then(response => {\r\n                this.initializeMyPizzas();\r\n                toastr.info('Pizza eliminada', 'Información', {\r\n                    positionClass: \"toast-top-left\"\r\n                });\r\n            }).catch(error => {\r\n                toastr.error(\"No se ha podido eliminar la pizza. Intentalo de nuevo más tarde.\");\r\n            });\r\n        },\r\n        generateVoucher: function(){\r\n            var exchange_points = document.getElementById(\"demo\").value;\r\n\r\n            if(exchange_points <= this.user_points && exchange_points != 0){\r\n                var url = 'generateVoucher';\r\n                axios.post(url,{\r\n                    'points' : exchange_points,\r\n                }).then(response => {\r\n                    this.initializeMyVouchers();\r\n                    document.getElementById(\"voucherCode\").innerHTML = response.data.voucherCode;\r\n                    document.getElementById(\"responseVoucher\").classList.remove(\"hide\");\r\n                    document.getElementById(\"generateVoucher\").classList.add(\"hide\");\r\n                }).catch(error => {\r\n                    toastr.error(\"Error al crear la pizza\");\r\n                });\r\n            }else{\r\n                toastr.error(\"Introduce una cantidad de puntos correcta\");\r\n            }\r\n        },\r\n        newVoucher: function() {\r\n            document.getElementById(\"responseVoucher\").classList.add(\"hide\");\r\n            document.getElementById(\"generateVoucher\").classList.remove(\"hide\");\r\n        },\r\n        generateBook: function(){\r\n            var hours = $(\"#hourpicker\").val();\r\n            var minutes = $(\"#minutespicker\").val();\r\n            var finalHour = this.hour + \":\" + this.minutes;\r\n            var nump = $(\"#numPersons\").val();\r\n            var date = $(\"#datepicker\").val();\r\n\r\n            if(this.checkBookInputs(date,nump)){\r\n                var url = 'generatebook';\r\n                axios.post(url, {\r\n                    'date' : date,\r\n                    'hour' : finalHour,\r\n                    'numPersons' : nump,\r\n                    'admin' : false\r\n                }).then(response => {\r\n                    if(response.data.result){\r\n                        $(\"#hourpicker\").val(\"\");\r\n                        $(\"#numPersons\").val(\"\");\r\n                        $(\"#datepicker\").val(\"\");\r\n                        $('#createBook').modal('hide');\r\n                        this.initializeMyBooks();\r\n                        newBook()\r\n                        toastr.info('Recibirás respuesta a tu petición en unos instantes', 'Petición de reserva realizada', {\r\n                            positionClass: \"toast-top-left\"\r\n                        });\r\n                    }else{\r\n                        toastr.error(\"Introduce una fecha posterior a la actual\");\r\n                    }\r\n                }).catch(error => {\r\n                        toastr.error(\"Error al realizar la reserva. Intentalo de nuevo más tarde\");\r\n                });\r\n            }else{\r\n                toastr.error(\"Revisa los datos introducidos\");\r\n            }\r\n        },\r\n        checkBookInputs: function(date,nump){\r\n            if(date.length==0 || nump.length==0){\r\n                return false;\r\n            }else{\r\n                return true;\r\n            }\r\n        },\r\n        showContent: function(order_id){\r\n            if($(\"#ordercontent\" + order_id).hasClass(\"hide\")){\r\n                $(\"#ordercontent\" + order_id).removeClass(\"hide\")\r\n                $(\"#btnShowContent\" + order_id).html(\"Cerrar contenido\");\r\n            }else{\r\n                $(\"#ordercontent\" + order_id).addClass(\"hide\")\r\n                $(\"#btnShowContent\" + order_id).html(\"Ver contenido\");\r\n            }\r\n        },\r\n        customFormatDate: function(bookDate){\r\n            parts = bookDate.split(\" \");\r\n            date = parts[0].split(\"-\");\r\n            hour = parts[1].split(\":\");\r\n\r\n            return date[2] + \"/\" + date[1] + \"/\" + date[0] + \" a las \" + hour[0] + \":\" + hour[1]\r\n        },\r\n        diffInDays: function(date1){\r\n            var date1 = new Date(date1);\r\n            var date2 = new Date();\r\n            var timeDiff = Math.abs(date2.getTime() - date1.getTime());\r\n            return Math.ceil(timeDiff / (1000 * 3600 * 24));\r\n        },\r\n        showHour: function(){\r\n            var hour = $(\"#hourpicker\").val();\r\n            if(hour < 10 && hour.length != 0){\r\n                this.hour = \"0\" + hour\r\n            }else if(hour > 23){\r\n                this.hour = \"00\"\r\n            }else if(hour.length == 0){\r\n                this.hour = \"00\"\r\n            }else{\r\n                this.hour = hour\r\n            }\r\n        },\r\n        showMinute: function(){\r\n            var minutes = $(\"#minutespicker\").val();\r\n            if(minutes < 10 && minutes.length != 0){\r\n                this.minutes = \"0\" + minutes\r\n            }else if(minutes > 59){\r\n                this.minutes = \"00\"\r\n            }else if(minutes.length == 0){\r\n                this.minutes = \"00\"\r\n            }else{\r\n                this.minutes = minutes\r\n            }\r\n        },\r\n        confirmRepeatOrder: function(order){\r\n            this.orderToRepeat = order;\r\n            $('#confirmReorder').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n        repeatOrder: function(){\r\n            cbUserDirection = $(\"#checkboxUserDirection\").prop(\"checked\");\r\n            cbLocalDirection = $(\"#checkboxLocalDirection\").prop(\"checked\");\r\n            inputOtherDirection = $(\"#inputDirection\").val();\r\n\r\n            if(cbUserDirection && cbLocalDirection){\r\n                toastr.error(\"Selecciona una sola dirección\");\r\n            }else if($(\"#sameDirection\").hasClass(\"hide\") && !cbUserDirection && !cbLocalDirection && inputOtherDirection.length == 0){\r\n                toastr.error(\"Introduce una dirección\");\r\n            }else{\r\n                if(cbLocalDirection){\r\n                    this.userDirection = \"Recogida en local\";\r\n                }else if (!$(\"#sameDirection\").hasClass(\"hide\") && !cbUserDirection && !cbLocalDirection){\r\n                    this.userDirection = this.orderToRepeat.direction\r\n                }else{\r\n                    this.userDirection = inputOtherDirection;\r\n                }\r\n                var url = \"repeatorder\"\r\n                axios.post(url, {\r\n                    'orderproducts' : this.orderToRepeat.orderproducts,\r\n                    'direction' : this.userDirection,\r\n                    'order_price': this.orderToRepeat.total_price,\r\n                    'reward_points': this.orderToRepeat.reward_points\r\n                }).then(response => {\r\n                    newOrder()\r\n                    this.closeModalConfirmReorder();\r\n                    localStorage.clear();\r\n                    mainOrder.refreshNotificationsBadge();\r\n                    this.initializeMyOrders();\r\n                toastr.info(\"<div><a href='http://localhost/impronta/public/user-orders'>Tu pedido ha sido realizado. Haz click aquí para consultar el estado.</a></div>\", 'Información', {\r\n                    positionClass: \"toast-top-left\",\r\n                    timeOut: 0\r\n                });\r\n\r\n            }).catch(error => {toastr.error('Vuelve a intentarlo de nuevo más tarde.', 'Error al realizar el pedido');\r\n            });\r\n            }\r\n        },\r\n        showDirectionInfo: function(){\r\n            $(\"#directionInfo\").removeClass(\"hide\");\r\n            $(\"#sameDirection\").addClass(\"hide\");\r\n\r\n        },\r\n        deleteOrder: function(order) {\r\n            var url = 'orders/' + order.id;\r\n            axios.delete(url).then(response => {\r\n                this.initializeMyOrders();\r\n            toastr.info(\"Pedido eliminado\", 'Información', {\r\n                positionClass: \"toast-top-left\"\r\n            });\r\n        }).catch(error => {\r\n                toastr.error(\"No se ha podido eliminar el pedido\");\r\n        });\r\n        },\r\n        deleteIngredient: function(ingredient){\r\n            var url = \"deleteuserdontlike/\" + ingredient.id;\r\n            axios.post(url).then(response => {\r\n                this.initializeMyDontLikeIngredients();\r\n            toastr.info('Ingrediente desmarcado como negativo', 'Información', {\r\n                positionClass: \"toast-top-left\"\r\n            });\r\n            }).catch(error => {\r\n                    toastr.error(\"No se ha podido eliminar el ingrediente\", error);\r\n            });\r\n        },\r\n        refreshUserProfileImage: function(){\r\n            var url = \"getuserimage\";\r\n            axios.get(url).then(response => {\r\n                $(\"#userProfileImage\").attr(\"src\",response.data.image);\r\n                $(\"#imgUserHeader\").attr(\"src\",response.data.image);\r\n            }).catch(error => {\r\n                toastr.error(\"Error obteniendo ingredientes\");\r\n            });\r\n        },\r\n        changeUserDirection: function(){\r\n            var newDirection = $(\"#newDirection\").val();\r\n            if(newDirection.length == 0){\r\n                toastr.error(\"Introduce una dirección\");\r\n            }else{\r\n                var url = \"changeuserdirection\";\r\n                axios.post(url, {\r\n                    'direction' : newDirection,\r\n                }).then(response => {\r\n                    this.getUserDirection();\r\n                    $(\"#newDirection\").val(\"\")\r\n                toastr.info(\"Dirección de envío actualizada\", 'Información', {\r\n                    positionClass: \"toast-top-left\",\r\n                });\r\n                }).catch(error => {\r\n                    toastr.error('Vuelve a intentarlo de nuevo más tarde.', 'Error al actualizar la dirección de envío');\r\n                });\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\nvar ingredients = [];\r\nvar ingredientsObjects = [];\r\nvar glob_little_price = 6.50;\r\nvar glob_medium_price = 12.00;\r\nvar glob_big_price = 16.50;\r\nvar glob_brusquetta_price = 6.00;\r\n\r\n\r\nfunction getIngredients(){\r\n    var url = 'getingredientsnames';\r\n    axios.get(url).then(response => {\r\n        var temp = [];\r\n    temp = response.data.ingredients;\r\n    for(i = 0; i < temp.length ; i++){\r\n        ingredientsObjects.push(temp[i]);\r\n        ingredients.push(temp[i].name);\r\n    }\r\n    }).catch(error => {\r\n        toastr.error(\"Error obteniendo ingredientes\");\r\n    });\r\n}\r\n\r\nfunction autocomplete(inp, arr) {\r\n    /*the autocomplete function takes two arguments,\r\n    the text field element and an array of possible autocompleted values:*/\r\n    var currentFocus;\r\n    /*execute a function when someone writes in the text field:*/\r\n    inp.addEventListener(\"input\", function(e) {\r\n        var a, b, i, val = this.value;\r\n        /*close any already open lists of autocompleted values*/\r\n        closeAllLists();\r\n        if (!val) { return false;}\r\n        currentFocus = -1;\r\n        /*create a DIV element that will contain the items (values):*/\r\n        a = document.createElement(\"DIV\");\r\n        a.setAttribute(\"id\", this.id + \"autocomplete-list\");\r\n        a.setAttribute(\"class\", \"autocomplete-items\");\r\n        /*append the DIV element as a child of the autocomplete container:*/\r\n        this.parentNode.appendChild(a);\r\n        /*for each item in the array...*/\r\n        for (i = 0; i < arr.length; i++) {\r\n            /*check if the item starts with the same letters as the text field value:*/\r\n            if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {\r\n                /*create a DIV element for each matching element:*/\r\n                b = document.createElement(\"DIV\");\r\n                /*make the matching letters bold:*/\r\n                b.innerHTML = \"<strong>\" + arr[i].substr(0, val.length) + \"</strong>\";\r\n                b.innerHTML += arr[i].substr(val.length);\r\n                /*insert a input field that will hold the current array item's value:*/\r\n                b.innerHTML += \"<input type='hidden' value='\" + arr[i] + \"'>\";\r\n                /*execute a function when someone clicks on the item value (DIV element):*/\r\n                b.addEventListener(\"click\", function(e) {\r\n                    if(vue_user.imInDontLike){\r\n                        addIngredient(this.getElementsByTagName(\"input\")[0].value)\r\n                    }else{\r\n                        addPizzaIngredient(this.getElementsByTagName(\"input\")[0].value)\r\n                    }\r\n                    closeAllLists();\r\n                });\r\n                a.appendChild(b);\r\n            }\r\n        }\r\n    });\r\n    /*execute a function presses a key on the keyboard:*/\r\n    inp.addEventListener(\"keydown\", function(e) {\r\n        var x = document.getElementById(this.id + \"autocomplete-list\");\r\n        if (x) x = x.getElementsByTagName(\"div\");\r\n        if (e.keyCode == 40) {\r\n            /*If the arrow DOWN key is pressed,\r\n            increase the currentFocus variable:*/\r\n            currentFocus++;\r\n            /*and and make the current item more visible:*/\r\n            addActive(x);\r\n        } else if (e.keyCode == 38) { //up\r\n            /*If the arrow UP key is pressed,\r\n            decrease the currentFocus variable:*/\r\n            currentFocus--;\r\n            /*and and make the current item more visible:*/\r\n            addActive(x);\r\n        } else if (e.keyCode == 13) {\r\n            /*If the ENTER key is pressed, prevent the form from being submitted,*/\r\n            e.preventDefault();\r\n            if (currentFocus > -1) {\r\n                /*and simulate a click on the \"active\" item:*/\r\n                if (x) x[currentFocus].click();\r\n            }\r\n        }\r\n    });\r\n    function addActive(x) {\r\n        /*a function to classify an item as \"active\":*/\r\n        if (!x) return false;\r\n        /*start by removing the \"active\" class on all items:*/\r\n        removeActive(x);\r\n        if (currentFocus >= x.length) currentFocus = 0;\r\n        if (currentFocus < 0) currentFocus = (x.length - 1);\r\n        /*add class \"autocomplete-active\":*/\r\n        x[currentFocus].classList.add(\"autocomplete-active\");\r\n    }\r\n    function removeActive(x) {\r\n        /*a function to remove the \"active\" class from all autocomplete items:*/\r\n        for (var i = 0; i < x.length; i++) {\r\n            x[i].classList.remove(\"autocomplete-active\");\r\n        }\r\n    }\r\n    function closeAllLists(elmnt) {\r\n        /*close all autocomplete lists in the document,\r\n        except the one passed as an argument:*/\r\n        var x = document.getElementsByClassName(\"autocomplete-items\");\r\n        for (var i = 0; i < x.length; i++) {\r\n            if (elmnt != x[i] && elmnt != inp) {\r\n                x[i].parentNode.removeChild(x[i]);\r\n            }\r\n        }\r\n    }\r\n    function addIngredient(name) {\r\n        document.getElementById(\"inpSearchIngredient\").value = \"\";\r\n\r\n        var url = 'userdontlike/' + name;\r\n\r\n        axios.post(url).then(response => {\r\n            vue_user.initializeMyDontLikeIngredients();\r\n            toastr.info('Nuevo ingrediente marcado como negativo', 'Información', {\r\n                positionClass: \"toast-top-left\"\r\n            });\r\n    }).catch(error => {\r\n            toastr.error(\"Ha sucedido un error, intentalo de nuevo más tarde\");\r\n    });\r\n    }\r\n\r\n    function addPizzaIngredient(name) {\r\n        document.getElementById(\"myInputCreatePizza\").value = \"\";\r\n        var ul = document.getElementById(\"pizzaIngredients\");\r\n        var li = document.createElement(\"li\");\r\n        li.setAttribute(\"id\", \"ing\" + name);\r\n        li.setAttribute(\"class\", \"myingredientstag pointer\");\r\n        li.appendChild(document.createTextNode(name));\r\n        ul.appendChild(li);\r\n        AddAndRefreshPizzaPrices(name);\r\n    }\r\n    // var ul = document.getElementById(\"pizzaIngredients\");\r\n    // if(ul.children.length == 0){\r\n    //\r\n    // }\r\n    function AddAndRefreshPizzaPrices(name){\r\n        var ingredientPrice = getIngredientPrice(name);\r\n        glob_little_price = Math.round((glob_little_price + ingredientPrice) * 100) / 100;\r\n        glob_medium_price = Math.round((glob_medium_price + ingredientPrice) * 100) / 100;\r\n        glob_big_price = Math.round((glob_big_price + ingredientPrice) * 100) / 100;\r\n        glob_brusquetta_price = Math.round((glob_brusquetta_price + ingredientPrice) * 100) / 100;\r\n\r\n        document.getElementById(\"little_price\").innerHTML = glob_little_price;\r\n        document.getElementById(\"medium_price\").innerHTML = glob_medium_price;\r\n        document.getElementById(\"big_price\").innerHTML = glob_big_price;\r\n        document.getElementById(\"brusquetta_price\").innerHTML = glob_brusquetta_price;\r\n    }\r\n\r\n    function getIngredientPrice(name){\r\n        for(i = 0; i < ingredientsObjects.length; i++){\r\n            if(ingredientsObjects[i].name == name){\r\n                return ingredientsObjects[i].price;\r\n            }\r\n        }\r\n    }\r\n    /*execute a function when someone clicks in the document:*/\r\n    document.addEventListener(\"click\", function (e) {\r\n        closeAllLists(e.target);\r\n    });\r\n}\r\nfunction getEventTarget(e) {\r\n    e = e || window.event;\r\n    return e.target || e.srcElement;\r\n}\r\n\r\nvar ul = document.getElementById('pizzaIngredients');\r\nul.onclick = function(event) {\r\n    //declaració\r\n    function getIngredientPrice(name){\r\n        for(i = 0; i < ingredientsObjects.length; i++){\r\n            if(ingredientsObjects[i].name == name){\r\n                return ingredientsObjects[i].price;\r\n            }\r\n        }\r\n    }\r\n    //Inici\r\n    var target = getEventTarget(event);\r\n    var ingredient = target.innerHTML;\r\n    var ul = document.getElementById(\"pizzaIngredients\");\r\n    var li = document.getElementById(\"ing\" + ingredient);\r\n    ul.removeChild(li);\r\n\r\n    if(ul.children.length == 0){\r\n        glob_little_price = 6.50;\r\n        glob_medium_price = 12.00;\r\n        glob_big_price = 16.50;\r\n        glob_brusquetta_price = 6.00;\r\n\r\n        document.getElementById(\"little_price\").innerHTML = \"0.00\";\r\n        document.getElementById(\"medium_price\").innerHTML = \"0.00\";\r\n        document.getElementById(\"big_price\").innerHTML = \"0.00\";\r\n        document.getElementById(\"brusquetta_price\").innerHTML = \"0.00\";\r\n    }else{\r\n        var ingredientPrice = getIngredientPrice(ingredient);\r\n        glob_little_price = Math.round((glob_little_price - ingredientPrice) * 100) / 100;\r\n        glob_medium_price = Math.round((glob_medium_price - ingredientPrice) * 100) / 100;\r\n        glob_big_price = Math.round((glob_big_price - ingredientPrice) * 100) / 100;\r\n        glob_brusquetta_price = Math.round((glob_brusquetta_price - ingredientPrice) * 100) / 100;\r\n\r\n        document.getElementById(\"little_price\").innerHTML = glob_little_price;\r\n        document.getElementById(\"medium_price\").innerHTML = glob_medium_price;\r\n        document.getElementById(\"big_price\").innerHTML = glob_big_price;\r\n        document.getElementById(\"brusquetta_price\").innerHTML = glob_brusquetta_price;\r\n    }\r\n};\r\n\r\nvar btnCreatePizza = document.getElementById(\"btnCreatePizza\");\r\nbtnCreatePizza.onclick = function(){\r\n    vue_user.little_price = glob_little_price;\r\n    vue_user.medium_price = glob_medium_price;\r\n    vue_user.big_price = glob_big_price;\r\n    vue_user.brusquetta_price = glob_brusquetta_price;\r\n    vue_user.createMyPizza();\r\n}\r\n\r\n$(document).ready(function(){\r\n    document.getElementById(\"inpSearchIngredient\").value = \"\";\r\n    document.getElementById(\"myInputCreatePizza\").value = \"\";\r\n    getIngredients();\r\n    autocomplete(document.getElementById(\"inpSearchIngredient\"), ingredients);\r\n    autocomplete(document.getElementById(\"myInputCreatePizza\"), ingredients);\r\n});\r\n\r\n","menuVue = new Vue({\r\n    el: '#menuVue',\r\n    created: function(){\r\n        this.initializeProducts();\r\n    },\r\n    mounted: function(){\r\n        this.setContent();\r\n    },\r\n    data: {\r\n        products: [],\r\n        pizzas: [],\r\n        antipasto: [],\r\n        ensaladas: [],\r\n        bebidas: [],\r\n        helados: [],\r\n        comments: [],\r\n        likes: [],\r\n        dontlikes: [],\r\n        dontlikesproducts: [],\r\n        userpizzas: [],\r\n        userfavs: [],\r\n        user_id: 0,\r\n        searcher: '',\r\n        menuproducts: [],\r\n        lastTab: \"pizzas\",\r\n        community: []\r\n    },\r\n    methods: {\r\n        initializeProducts: function() {\r\n            var url = 'productsbytype';\r\n            axios.get(url).then(response => {\r\n                this.products = response.data.products;\r\n                this.pizzas = response.data.pizzas;\r\n                this.antipasto = response.data.antipasto;\r\n                this.ensaladas = response.data.ensaladas;\r\n                this.bebidas = response.data.bebidas;\r\n                this.helados = response.data.helados;\r\n                this.likes = response.data.likes;\r\n                this.dontlikes = response.data.dontlikes;\r\n                this.userpizzas = response.data.userpizzas;\r\n                this.userfavs = response.data.userfavs;\r\n                this.dontlikesproducts = response.data.dontlikesproducts;\r\n                this.user_id = response.data.user_id;\r\n                this.menuproducts = this.pizzas;\r\n                this.community = response.data.community;\r\n            }).catch(error => {\r\n                toastr.error(\"Error obteniendo los productos de la carta\", error);\r\n            });\r\n        },\r\n        setContent: function(){\r\n            $(document).ready(function(){\r\n                menuVue.getContent(menuContent.content);\r\n            });\r\n        },\r\n        getComments: function(product_id){\r\n            var url = 'comments/' + product_id;\r\n            axios.get(url).then(response => {\r\n                this.comments = response.data;\r\n        });\r\n        },\r\n        isLiked: function(product_id){\r\n            var found = false;\r\n            this.likes.forEach(function(entry) {\r\n                if(product_id === entry.product_id){\r\n                    found = true;\r\n                }\r\n            });\r\n            return found;\r\n        },\r\n        isDontLiked: function(ingredient_id){\r\n            var found = false;\r\n            this.dontlikes.forEach(function(entry) {\r\n                if(ingredient_id === entry.ingredient_id){\r\n                    found = true;\r\n                }\r\n            });\r\n            return found;\r\n        },\r\n        likeButton: function(product_id){\r\n            if($('#btnLikes' + product_id).hasClass('hasLike')){\r\n                $('#btnLikes' + product_id).removeClass('hasLike');\r\n                $('#btnLikes' + product_id).removeClass('badge-success').addClass('badge-primary');\r\n                $('#btnLikes' + product_id).text( Number($('#btnLikes' + product_id).text()) - 1 );\r\n            }else{\r\n                $('#btnLikes' + product_id).addClass('hasLike');\r\n                $('#btnLikes' + product_id).removeClass('badge-primary').addClass('badge-success');\r\n                $('#btnLikes' + product_id).text( Number($('#btnLikes' + product_id).text()) + 1 );\r\n            }\r\n        },\r\n        addComment: function(product_id){\r\n            var id = \"txtarea\" + product_id;\r\n            var comment = document.getElementById(id).value;\r\n            var url = 'addComment';\r\n            axios.post(url, {\r\n                'product_id' : product_id,\r\n                'comment' : comment\r\n            }).then(response => {\r\n                this.initializeProducts();\r\n                this.getContent(\"search\");\r\n                var id = \"txtarea\" + product_id;\r\n                var counter_id = \"counter\" + product_id;\r\n                document.getElementById(id).value = \"\";\r\n                document.getElementById(counter_id).innerHTML = 0;\r\n                toastr.info('Comentario realizado', 'Información', {\r\n                    positionClass: \"toast-top-left\"\r\n                });\r\n            }).catch(error => {\r\n                toastr.error('Vuelve a intentarlo de nuevo más tarde.', 'Error al realizar comentario', {\r\n                positionClass: \"toast-top-left\"\r\n            });\r\n            });\r\n        },\r\n        deleteComment: function(comment_id){\r\n            var url = 'deleteComment';\r\n            axios.post(url, {\r\n                'comment_id' : comment_id,\r\n            }).then(response => {\r\n                this.initializeProducts();\r\n                toastr.info('Comentario eliminado', 'Información', {\r\n                    positionClass: \"toast-top-left\"\r\n                });\r\n            }).catch(error => {\r\n                toastr.error('Vuelve a intentarlo de nuevo más tarde.', 'Error al eliminar comentario', {\r\n                positionClass: \"toast-top-left\"\r\n            });\r\n        });\r\n    },\r\n        checkDelete: function(comment_id){\r\n            if ($('#' + comment_id).hasClass(\"pointed\")){\r\n                $('#' + comment_id).removeClass(\"pointed\");\r\n                this.deleteComment(comment_id);\r\n            }else{\r\n                $('#' + comment_id).addClass(\"pointed\");\r\n            }\r\n        },\r\n        isProductDontLiked: function(product_id){\r\n            var found = false;\r\n            this.dontlikesproducts.forEach(function(entry) {\r\n                if(product_id == entry){\r\n                    found = true;\r\n                }\r\n            });\r\n            return found;\r\n        },\r\n        test: function(product_id){\r\n            var comment_id = \"txtarea\" + product_id;\r\n            var counter_id = \"counter\" + product_id;\r\n            var comment = document.getElementById(comment_id).value;\r\n            document.getElementById(counter_id).innerHTML = comment.length;\r\n        },\r\n        getUserFavs: function(){\r\n            var url = \"getfavs\"\r\n            axios.get(url).then(response => {\r\n                this.userfavs = response.data.favs;\r\n            });\r\n        },\r\n        clearMenuActive: function(isAuth){\r\n            $(\"#lblPizzas\").removeClass(\"active\");\r\n            $(\"#lblAntipasto\").removeClass(\"active\");\r\n            $(\"#lblBebidas\").removeClass(\"active\");\r\n            $(\"#lblEnsaladas\").removeClass(\"active\");\r\n            $(\"#lblHelados\").removeClass(\"active\");\r\n\r\n            if(isAuth != 0){\r\n                $(\"#lblUserFavs\").removeClass(\"active\");\r\n                $(\"#lblUserPizzas\").removeClass(\"active\");\r\n                $(\"#lblComunity\").removeClass(\"active\");\r\n            }\r\n\r\n        },\r\n        getContent: function(content_id, isAuth){\r\n            switch(content_id){\r\n                case \"pizzas\":\r\n                    this.clearMenuActive(isAuth);\r\n                    $(\"#lblPizzas\").addClass(\"active\");\r\n                    this.menuproducts = this.pizzas;\r\n                    this.lastTab = \"pizzas\";\r\n                    break;\r\n                case \"antipasto\":\r\n                    this.clearMenuActive(isAuth);\r\n                    $(\"#lblAntipasto\").addClass(\"active\");\r\n                    this.menuproducts = this.antipasto;\r\n                    this.lastTab = \"antipasto\";\r\n                    break;\r\n                case \"ensaladas\":\r\n                    this.clearMenuActive(isAuth);\r\n                    $(\"#lblEnsaladas\").addClass(\"active\");\r\n                    this.menuproducts = this.ensaladas;\r\n                    this.lastTab = \"ensaladas\";\r\n                    break;\r\n                case \"bebidas\":\r\n                    this.clearMenuActive(isAuth);\r\n                    $(\"#lblBebidas\").addClass(\"active\");\r\n                    this.menuproducts = this.bebidas;\r\n                    this.lastTab = \"bebidas\";\r\n                    break;\r\n                case \"helados\":\r\n                    this.clearMenuActive(isAuth);\r\n                    $(\"#lblHelados\").addClass(\"active\");\r\n                    this.menuproducts = this.helados;\r\n                    this.lastTab = \"helados\";\r\n                    break;\r\n                case \"mypizzas\":\r\n                    this.clearMenuActive(isAuth);\r\n                    $(\"#lblUserPizzas\").addClass(\"active\");\r\n                    this.menuproducts = this.userpizzas;\r\n                    this.lastTab = \"mypizzas\";\r\n                    break;\r\n                case \"myfavs\":\r\n                    this.getUserFavs();\r\n                    this.clearMenuActive(isAuth);\r\n                    $(\"#lblUserFavs\").addClass(\"active\");\r\n                    this.menuproducts = this.userfavs;\r\n                    this.lastTab = \"myfavs\";\r\n                    break;\r\n                case \"community\":\r\n                    this.clearMenuActive(isAuth);\r\n                    $(\"#lblComunity\").addClass(\"active\");\r\n                    this.menuproducts = this.community;\r\n                    this.lastTab = \"community\";\r\n                    break;\r\n                case \"search\":\r\n                    this.clearMenuActive(isAuth);\r\n                    if(this.searcher.length != 0){\r\n                        this.menuproducts = [];\r\n                        for(i=0; i< this.products.length; i++){\r\n                            if(this.products[i].name.includes(this.capitalize(this.searcher))) {\r\n                                this.menuproducts.push(this.products[i]);\r\n                            }\r\n                        }\r\n                    }else{\r\n                        this.getContent(this.lastTab)\r\n                    }\r\n                    break;\r\n            }\r\n        },\r\n        capitalize: function(str){\r\n            return str.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\r\n        },\r\n        alertLog: function(){\r\n            toastr.info('Únete a nosotros para disfrutar de todas las funcionalidades', 'Información', {\r\n                positionClass: \"toast-top-left\"\r\n            });\r\n        }\r\n    }\r\n});\r\n\r\n","var sendOrderVue = new Vue({\r\n    el: '#menuVue',\r\n    created: function(){\r\n        this.initializeValues();\r\n        this.getRecommendations();\r\n    },\r\n    data: {\r\n        userDirection: \"\",\r\n        orderPrice: 0,\r\n        rewardPoints: 0,\r\n        localRecommends: [],\r\n        userRecommends: [],\r\n    },\r\n    methods: {\r\n        initializeValues: function(){\r\n            var myOrder = localStorage['myOrder'] ? JSON.parse(localStorage['myOrder']) : [];\r\n            this.orderPrice = 0\r\n            for(i = 0; i < myOrder.length; i++){\r\n                this.orderPrice += myOrder[i].finalPrice;\r\n            }\r\n            this.orderPrice = Math.round(this.orderPrice * 100) / 100;\r\n            this.rewardPoints = parseInt(this.orderPrice * 4);\r\n            $(\"#totalPrice\").html(this.orderPrice);\r\n            $(\"#rewPoints\").html(this.rewardPoints);\r\n            this.getUserDirection();\r\n            this.getRecommendations();\r\n        },\r\n        getRecommendations: function(){\r\n            var url = \"getrecommendations\";\r\n            axios.get(url).then(response => {\r\n                this.localRecommends = response.data.local;\r\n            }).catch(error => {\r\n                toastr.error(\"Error obteniendo recomendaciones del local\");\r\n            });\r\n\r\n            var url = \"getuserrecommendations\"\r\n            axios.post(url, {\r\n                'orderproducts' : mainOrder.myOrder,\r\n            }).then(response => {\r\n                this.userRecommends = response.data.user;\r\n            }).catch(error => {\r\n                toastr.error('No se han podido obtener las recomendaciones');\r\n            });\r\n        },\r\n        getUserDirection: function(){\r\n            var url = \"getuserdirection\";\r\n            axios.get(url).then(response => {\r\n                this.userDirection = response.data.direction;\r\n            }).catch(error => {\r\n                toastr.error(\"Error obteniendo dirección de usuario\");\r\n            });\r\n        },\r\n        showmodalConfirmation: function(){\r\n            if(mainOrder.myOrder.length == 0){\r\n                toastr.error(\"¡El pedido está vacío!\");\r\n            }else{\r\n                $('#popupConfirmation').modal({backdrop: 'static', keyboard: false});\r\n            }\r\n        },\r\n        closeModalConfirmation: function(){\r\n            $('#popupConfirmation').modal('hide');\r\n        },\r\n        closeModalDirection: function(){\r\n            $('#popupDirection').modal('hide');\r\n        },\r\n        confirmDirection: function() {\r\n            this.closeModalConfirmation();\r\n            $('#popupDirection').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n        deleteProductFromOrder: function(obj){\r\n            mainOrder.deleteProductFromOrder(obj);\r\n            this.initializeValues();\r\n        },\r\n        createOrder: function(){\r\n            cbUserDirection = $(\"#checkboxUserDirection\").prop(\"checked\");\r\n            cbOtherDirection = $(\"#checkboxdirection\").prop(\"checked\");\r\n            cbLocalDirection = $(\"#checkboxLocalDirection\").prop(\"checked\");\r\n            inputOtherDirection = $(\"#inputDirection\").val();\r\n\r\n            if(cbUserDirection && cbOtherDirection || cbUserDirection && cbLocalDirection || cbOtherDirection && cbLocalDirection){\r\n                toastr.error(\"Selecciona una sola dirección\");\r\n            }else if(!cbUserDirection && !cbOtherDirection && !cbLocalDirection){\r\n                toastr.error(\"Selecciona una dirección\");\r\n            }else if(cbOtherDirection && inputOtherDirection.length == 0){\r\n                toastr.error(\"Introduce una dirección\");\r\n            }else{\r\n                if(cbLocalDirection){\r\n                    this.userDirection = \"Recogida en local\";\r\n                }else{\r\n                    this.userDirection = cbUserDirection ? this.userDirection : inputOtherDirection\r\n                }\r\n                var url = \"neworder\"\r\n                axios.post(url, {\r\n                    'orderproducts' : mainOrder.myOrder,\r\n                    'direction' : this.userDirection,\r\n                    'order_price': this.orderPrice,\r\n                    'reward_points': this.rewardPoints\r\n                    }).then(response => {\r\n                        newOrder();\r\n                        this.closeModalDirection();\r\n                        localStorage.clear();\r\n                        mainOrder.refreshNotificationsBadge();\r\n                        this.initializeValues();\r\n                        toastr.info(\"<div><a href='http://localhost/impronta/public/user-orders'>Tu pedido ha sido realizado. Haz click aquí para consultar el estado.</a></div>\", 'Información', {\r\n                            positionClass: \"toast-top-left\",\r\n                            timeOut: 0\r\n                        });\r\n\r\n                    }).catch(error => {\r\n                        toastr.error('Vuelve a intentarlo de nuevo más tarde.', 'Error al realizar el pedido')\r\n                    });\r\n            }\r\n        },\r\n        showPopUpAddPizza: function (value) {\r\n            switch(value){\r\n                case 1:\r\n                    mainOrder.actualProduct = this.localRecommends[0];\r\n                    break;\r\n                case 2:\r\n                    mainOrder.actualProduct = this.localRecommends[1];\r\n                    break;\r\n                case 3:\r\n                    mainOrder.actualProduct = this.localRecommends[2];\r\n                    break;\r\n            }\r\n            $('#popupAddPizzaToOrder').modal({backdrop: 'static', keyboard: false});\r\n        },\r\n    }\r\n});\r\n\r\n","function slideMove(id) {\r\n\t$('#register-card').removeClass('hide').hide();\r\n\t$('#login-card').hide();\r\n\r\n\tif(id == \"login\"){\r\n\t\t$('#head-register').removeClass('active');\r\n\t\t$('#head-login').addClass('active');\r\n\r\n        $('#register-card').hide();\r\n        $('#reset-card').hide();\r\n\t}else if(id == \"register\"){\r\n        $('#head-register').addClass('active');\r\n        $('#head-login').removeClass('active');\r\n\r\n        $('#login-card').hide();\r\n        $('#reset-card').hide();\r\n    }else{\r\n        $('#reset-card').removeClass('hide');\r\n        $('#login-card').hide();\r\n        $('#register-card').hide();\r\n\t}\r\n\r\n\t$(\"#\"+id+'-card').fadeIn();\r\n}","function likeButton(product_id){\r\n    var id = product_id.substring(8,product_id.length);\r\n\r\n    if($('#btnLikes' + id).hasClass('hasLike')){\r\n        //DELETE LIKE RELATION\r\n        $('#btnLikes' + id).removeClass('hasLike');\r\n        $('#spanLikes' + id).removeClass('badge-success').addClass('badge-primary');\r\n        $('#numLikes' + id).text( Number($('#spanLikes' + id).text()) - 1 );\r\n\r\n        var url = 'deleteLike';\r\n        axios.post(url, {\r\n            'product_id' : id,\r\n        }).then(response => {\r\n            menuVue.initializeProducts();\r\n            toastr.info('¡Ya no te gusta el producto!', 'Información', {\r\n            positionClass: \"toast-top-left\"\r\n            });\r\n        });\r\n    }else{\r\n        //ADD LIKE RELATION\r\n        $('#btnLikes' + id).addClass('hasLike');\r\n        $('#spanLikes' + id).removeClass('badge-primary').addClass('badge-success');\r\n        $('#numLikes' + id).text( Number($('#spanLikes' + id).text()) + 1 );\r\n\r\n        var url = 'addLike';\r\n        axios.post(url, {\r\n            'product_id' : id,\r\n        }).then(response => {\r\n            menuVue.initializeProducts();\r\n            toastr.info('¡Te gusta un nuevo producto!', 'Información', {\r\n            positionClass: \"toast-top-left\"\r\n            });\r\n        });\r\n    }\r\n}","var slider = document.getElementById(\"myRange\");\r\nvar output = document.getElementById(\"demo\");\r\noutput.value = 0;\r\n\r\nslider.oninput = function() {\r\n    output.value = this.value;\r\n}","$(document).ready( function () {\r\n    reset()\r\n    switch (appSettings.page){\r\n        case \"home\":\r\n            $('#home-content').show();\r\n            break;\r\n        case \"orders\":\r\n            $('#pedidos-content').show();\r\n            break;\r\n        case \"books\":\r\n            $('#reservas-content').show();\r\n            break;\r\n        case \"favs\":\r\n            $('#favoritos-content').show();\r\n            break;\r\n        case \"pizzas\":\r\n            vue_user.imInDontLike = 0;\r\n            $('#mispizzas-content').show();\r\n            break;\r\n        case \"points\":\r\n            $('#canjear-content').show();\r\n            break;\r\n        case \"dontlike\":\r\n            vue_user.imInDontLike = 1;\r\n            $('#config').addClass('activado');\r\n            $('#config').children('ul').slideDown();\r\n            $('#nomegusta-content').show();\r\n            break;\r\n        case \"changeemail\":\r\n            $('#config').addClass('activado');\r\n            $('#config').children('ul').slideDown();\r\n            $('#cambiaremail-content').show();\r\n            break;\r\n\r\n        case \"changephoto\":\r\n            vue_user.refreshUserProfileImage();\r\n            $('#config').addClass('activado');\r\n            $('#config').children('ul').slideDown();\r\n            $('#cambiarimagen-content').show();\r\n            break;\r\n\r\n        case \"changedirection\":\r\n            $('#config').addClass('activado');\r\n            $('#config').children('ul').slideDown();\r\n            $('#cambiardireccion-content').show();\r\n            break;\r\n\r\n        case \"config\":\r\n            $('#config').addClass('activado');\r\n            $('#configicon').addClass('fa-chevron-up');\r\n            $('#config').children('ul').slideDown();\r\n            $('#config-content').show();\r\n            break;\r\n    };\r\n\r\n    document.getElementById(\"config\").addEventListener(\"click\", switcher);\r\n\r\n});\r\n\r\n\r\nfunction slideMove(id) {\r\n    reset()\r\n\r\n    if(id == \"nomegusta\"){\r\n        vue_user.imInDontLike = 1;\r\n    }else{\r\n        vue_user.imInDontLike = 0;\r\n    }\r\n\r\n    $('#' + id + '-content').css({\r\n        'right': '-350px'\r\n\r\n    }).show().animate({\r\n\r\n        'right': '50px'\r\n\r\n    }, 700, function () {\r\n\r\n        $(this).animate({'right': '0'}, 100);\r\n    });\r\n}\r\n\r\nfunction switcher(){\r\n    if($('#config').hasClass('activado')){\r\n        $('#configicon').removeClass('fa-chevron-up');\r\n        $('#configicon').addClass('fa-chevron-down');\r\n        $('#config').removeClass('activado');\r\n        $('#config').children('ul').slideUp();\r\n    }else{\r\n        $('#configicon').removeClass('fa-chevron-down');\r\n        $('#configicon').addClass('fa-chevron-up');\r\n        $('#config').addClass('activado');\r\n        $('#config').children('ul').slideDown();\r\n    }\r\n}\r\nfunction submitform(){\r\n    localStorage.clear();\r\n    $('#myform').submit();\r\n}\r\n\r\nfunction loadImage(input){\r\n    if (input.files && input.files[0]) {\r\n        var reader = new FileReader();\r\n        reader.onload = function (e) {\r\n            $('#blah')\r\n                .removeClass('hide')\r\n                .attr('src', e.target.result)\r\n\r\n            $('#submit').removeClass('hide');\r\n        };\r\n        reader.readAsDataURL(input.files[0]);\r\n    }\r\n}\r\n\r\nfunction reset(){\r\n    $('#home-content').removeClass('hide').hide();\r\n    $('#pedidos-content').removeClass('hide').hide();\r\n    $('#reservas-content').removeClass('hide').hide();\r\n    $('#favoritos-content').removeClass('hide').hide();\r\n    $('#mispizzas-content').removeClass('hide').hide();\r\n    $('#canjear-content').removeClass('hide').hide();\r\n    $('#nomegusta-content').removeClass('hide').hide();\r\n    $('#cambiaremail-content').removeClass('hide').hide();\r\n    $('#cambiarimagen-content').removeClass('hide').hide();\r\n    $('#cambiardireccion-content').removeClass('hide').hide();\r\n    $('#config-content').removeClass('hide').hide();\r\n}"],"sourceRoot":"/source/"}